{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\n\n\nexport default async function searchImagesByQuery(query, page) {\n    const URL = \"https://pixabay.com/api/\"; \n    const API_KEY = \"45080955-c7c4547ab1841009711dd2978\";\n\n    try {\n      const response = await axios.get(URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15\n        }\n    })\n      return response.data\n    } catch (error) {\n      iziToast.error({\n        position: \"topRight\",\n          message: `${error}`,\n      })\n    }\n}\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function createImages(data) {\n    const lightbox = new SimpleLightbox('.gallery-list a', { \n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250\n     });\n    const list = document.querySelector(\".gallery-list\");\n    let images =  data.hits.map((hit) => `<div class=\"image-frame\"><a href=\"${hit.largeImageURL}\"><img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" /></a><div class =\"text-wraper\"><div class=\"text-block\"><h5>likes</h5><p>${hit.likes}</p></div><div class=\"text-block\"><h5>views</h5><p>${hit.views}</p></div><div class=\"text-block\"><h5>comments</h5><p>${hit.comments}</p></div><div class=\"text-block\"><h5>downloads</h5><p>${hit.downloads}</p></div></div></div>`).join(\"\");\n    list.insertAdjacentHTML(\"beforeend\", images);\n    lightbox.refresh();\n}\n\nexport function clearImages() {\n    const list = document.querySelector(\".gallery-list\");\n    list.innerHTML = \"\";\n}\n\nexport function scrollDown() {\n    const list = document.querySelector(\".gallery-list\");\n    const height = list.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: height * 2,\n        behavior: \"smooth\"\n    });      \n}","import searchImagesByQuery from \"./js/pixabay-api\";\nimport { createImages, clearImages, scrollDown } from \"./js/render-functions\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Описаний у документації\n\nconst form = document.querySelector(\".gallery-form\");\nconst input = document.querySelector(\".input-for-gallery\");\nconst loader = document.querySelector(\".loader\");\nconst button = document.querySelector(\".load\");\nconst message = document.querySelector(\".bottom\")\n\nlet page = 1;\nlet wordFromStart = \"\";\nlet currentWord = \"\";\n\nbutton.addEventListener(\"click\", handleClick)\nform.addEventListener(\"submit\", handleSubmit)\n\nfunction handleSubmit(event) {\n    clearImages()\n    event.preventDefault();\n    loader.classList.remove(\"hiden\")\n    message.classList.remove(\"show-text\")\n    let wordForSearch = input.value.trim();\n    wordFromStart = wordForSearch;\n    currentWord = wordForSearch;\n      page = 1;\n    if (wordForSearch === '') {\n      iziToast.error({\n        position: \"topRight\",\n          message: 'Please fill the input',\n      });\n      loader.classList.add(\"hiden\")\n      return;\n  }  \n    searchImagesByQuery(`${wordForSearch}`, page).then((data) => {if (data.total === 0) {\n      iziToast.error({\n        position: \"topRight\",\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      loader.classList.add(\"hiden\")\n      return;\n    } else {\n    createImages(data);    \n    button.classList.remove(\"hiden\");\n  }\n  if (data.hits.length < 15) {\n    button.classList.add(\"hiden\");\n    iziToast.info({\n      position: \"topRight\",\n      message: \"We're sorry, but you've reached the end of search results.\",\n  });\n  message.classList.add(\"show-text\");\n}\n    loader.classList.add(\"hiden\")\n    \n  });\n\n}\n\n  function handleClick(event) {\n  if (wordFromStart !== currentWord) {\n    page = 1;\n  }\n  page += 1;\n  loader.classList.remove(\"hiden\")\n  searchImagesByQuery(`${wordFromStart}`, page).then((data) => {\n    if (data.hits.length < 15) {\n      button.classList.add(\"hidden\");\n      iziToast.info({\n          position: \"topRight\",\n          message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loader.classList.add(\"hiden\")\n      button.classList.add(\"hiden\")\n      message.classList.add(\"show-text\")\n  }\n    createImages(data)\n    scrollDown()\n    loader.classList.add(\"hiden\");\n  }).catch(error => {\n    iziToast.error({\n        position: \"topRight\",\n        message: error,\n    });\n    loader.classList.add(\"hiden\");\n});\n  \n}"],"names":["searchImagesByQuery","query","page","URL","API_KEY","axios","error","createImages","data","lightbox","SimpleLightbox","list","images","hit","clearImages","scrollDown","height","form","input","loader","button","message","wordFromStart","currentWord","handleClick","handleSubmit","event","wordForSearch","iziToast"],"mappings":"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"}